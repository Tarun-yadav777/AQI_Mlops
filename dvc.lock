schema: '2.0'
stages:
  load_data:
    cmd: python src/data/load_data.py --config=params.yaml
    deps:
    - path: data_given/Real_combine.csv
      md5: 936a7baaaf19c969611edf24f16c3ad0
      size: 61870
    - path: src/data/load_data.py
      md5: 03b81db4fc87dd68f786b0a37337b311
      size: 801
    - path: src/data/make_dataset.py
      md5: 3ff4a2cecaf639618897be3c96dad2cd
      size: 589
    outs:
    - path: data/raw/Real_combine.csv
      md5: 4696103505ff74b93561832d5e8b2be3
      size: 59637
  split_data:
    cmd: python src/data/split_data.py --config=params.yaml
    deps:
    - path: data/raw/Real_combine.csv
      md5: 4696103505ff74b93561832d5e8b2be3
      size: 59637
    - path: src/data/split_data.py
      md5: 122af654aa0a6d602fb2ac0c1ea920ba
      size: 1060
    outs:
    - path: data/raw/test_data.csv
      md5: cba55f6b4c1a6b537c023a3ee1cc40fe
      size: 12036
    - path: data/raw/train_data.csv
      md5: f61a4107f1a7627a8a1830abd59b2b34
      size: 47589
  feature_importance:
    cmd: python src/features/build_features.py --config=params.yaml
    deps:
    - path: data/raw/Real_combine.csv
      md5: 4696103505ff74b93561832d5e8b2be3
      size: 59637
    - path: src/features/build_features.py
      md5: c85f6b2a31833416df382c0976f04c87
      size: 1419
    outs:
    - path: reports/feature_importance.json
      md5: b17de72e62f4585174d6382b72bd3a5d
      size: 256
  train_and_evaluate:
    cmd: python src/models/train_model.py --config=params.yaml
    deps:
    - path: data/raw/train_data.csv
      md5: f61a4107f1a7627a8a1830abd59b2b34
      size: 47589
    - path: src/models/train_model.py
      md5: 9fe501578952d6bb511c789ed8f623c7
      size: 2056
    params:
      params.yaml:
        estimators.RandomForestRegressor.params.max_depth: 15
        estimators.RandomForestRegressor.params.max_features: sqrt
        estimators.RandomForestRegressor.params.min_samples_leaf: 1
        estimators.RandomForestRegressor.params.min_samples_split: 2
        estimators.RandomForestRegressor.params.n_estimators: 500
    outs:
    - path: models/model.joblib
      md5: 15896fc5e46c6bc53d6400a79073f3df
      size: 25055656
    - path: reports/params.json
      md5: 68431c66fa4959f2995900438217a614
      size: 137
  evaluate_and_predict:
    cmd: python src/models/predict_model.py --config=params.yaml
    deps:
    - path: data/raw/test_data.csv
      md5: cba55f6b4c1a6b537c023a3ee1cc40fe
      size: 12036
    - path: src/models/predict_model.py
      md5: 25ccfe3522423043a306262f075d6b07
      size: 1561
    outs:
    - path: reports/scores.json
      md5: 4614dd5bb286276425f4e30f22b44465
      size: 98
